{"version":3,"sources":["../file:/Users/congnt/Work/Game/Fami/assets/scripts/managers/file:/Users/congnt/Work/Game/Fami/assets/scripts/managers/BackgroundScroller.ts","../file:/Users/congnt/Work/Game/Fami/assets/scripts/models/file:/Users/congnt/Work/Game/Fami/assets/scripts/models/BeanFall.ts","../file:/Users/congnt/Work/Game/Fami/assets/scripts/models/file:/Users/congnt/Work/Game/Fami/assets/scripts/models/CameraFollow.ts","../file:/Applications/Cocos/Creator/3.8.3/CocosCreator.app/Contents/Resources/resources/3d/engine/editor/assets/tools/file:/Applications/Cocos/Creator/3.8.3/CocosCreator.app/Contents/Resources/resources/3d/engine/editor/assets/tools/debug-view-runtime-control.ts","../file:/Users/congnt/Work/Game/Fami/assets/scripts/managers/file:/Users/congnt/Work/Game/Fami/assets/scripts/managers/GameManager.ts","../file:/Users/congnt/Work/Game/Fami/assets/scripts/gameconfig/file:/Users/congnt/Work/Game/Fami/assets/scripts/gameconfig/Global.ts","../file:/Users/congnt/Work/Game/Fami/assets/scripts/gameconfig/file:/Users/congnt/Work/Game/Fami/assets/scripts/gameconfig/ItemConfig.ts","../file:/Users/congnt/Work/Game/Fami/assets/scripts/models/file:/Users/congnt/Work/Game/Fami/assets/scripts/models/ScreenTouchHandler.ts"],"names":["ccclass","_decorator","property","_dec","_dec2","Node","_dec3","_dec4","_descriptor","_applyDecoratedDescriptor","_class2","_Component","BackgroundScroller","_this","_len","arguments","length","args","Array","_key","call","apply","concat","_initializerDefineProperty","_assertThisInitialized","_descriptor2","_descriptor3","backgroundHeight","tempPlayerY","getLowerValue","A","B","_inheritsLoose","_proto","prototype","onLoad","this","background1","getComponent","UITransform","height","update","dt","playerY","player","getPosition","y","bg1Pos","bg2Pos","background2","scrollBackgrounds","setPosition","Vec3","x","z","Component","configurable","enumerable","writable","initializer","_class","_RF","pop","BeanFall","rigidBody","seesawCollider","seesawAnimation","PhysicsSystem2D","instance","enable","bean","RigidBody2D","gravityScale","node","on","EventType","TOUCH_START","onTouchStart","seesaw","Animation","onDestroy","beanCollider","Collider2D","off","Contact2DType","BEGIN_CONTACT","onBeginContact","event","scheduleOnce","startFalling","scale","fixedRotation","selfCollider","otherCollider","contact","beanPosition","getWorldPosition","seesawPosition","seesawHeight","playSeesawAnimation","stopBean","play","linearVelocity","Vec2","CameraFollow","initialPlayerPosition","initialCameraPosition","offset","isFollowing","isResetting","set","subtract","targetPosition","desiredPosition","add","newPosition","lerp","followSpeed","setWorldPosition","setFollowing","following","DebugViewRuntimeControl","_single","strSingle","strComposite","strMisc","compositeModeToggleList","singleModeToggleList","miscModeToggleList","textComponentList","labelComponentList","textContentList","hideButtonLabel","_currentColorIndex","strColor","color","Color","WHITE","BLACK","RED","GREEN","BLUE","start","parent","Canvas","uiTransform","halfScreenWidth","width","halfScreenHeight","miscNode","getChildByName","buttonNode","instantiate","name","titleNode","i","newLabel","EnableAllCompositeModeButton","setScale","labelComponent","Label","string","overflow","currentRow","newNode","singleModeToggle","textComponent","getComponentInChildren","RichText","Toggle","TOGGLE","toggleSingleMode","Button","CLICK","enableAllCompositeMode","changeColorButton","changeTextColor","HideButton","hideUI","compositeModeToggle","isChecked","toggleLightingWithAlbedo","toggleCSMColoration","toggleCompositeMode","console","error","isTextMatched","textUI","textDescription","tempText","String","findIndex","search","substr","toggle","debugView","director","root","singleMode","enableCompositeMode","lightingWithAlbedo","csmLayerColoration","button","toggleComponent","activeValue","active","deltaTime","GameManager","Global","playCount","playCountLabel","startButton","startGame","loadScene","Math","floor","random","totalPoints","LogoPositioner","setPositionWithPadding","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_dec17","ScreenTouchHandler","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","_descriptor14","_descriptor15","_descriptor16","minScale","maxScale","duration","rigidBean","rigidSeesaw","scalingTween","isPlayerLaunched","beanRotation","seesawRotation","legOfSeesawPosition","legOfSeesawRotation","grassPosition","grassRotation","managerPosition","onInitData","onInitController","TOUCH_END","onTouchEnd","replayButton","replayGame","resultLabel","totalPoint","endgameTitle","endgamePoint","endgamePlayer","endgameLogo","eulerAngles","legOfSeesaw","grass","startScaling","stopScaling","stop","tween","to","union","repeatForever","launchPlayer","_this2","level","screenHeight","view","getVisibleSize","clone","cameraFollow","camera","worldPosition","easing","delay","showResult","backgroundScroller","enabled","_this3","point","uiOpacity","UIOpacity","addComponent","opacity","setTimeout","updateItems","logo","setRotationFromEuler","type","ERigidBody2DType","Static","Dynamic"],"mappings":"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","file":"all.js","sourcesContent":["import { _decorator, Component, Node, Vec3, UITransform, view } from \"cc\";\nconst { ccclass, property } = _decorator;\n\n@ccclass(\"BackgroundScroller\")\nexport class BackgroundScroller extends Component {\n  @property(Node)\n  background1: Node = null;\n\n  @property(Node)\n  background2: Node = null;\n\n  @property(Node)\n  player: Node = null;\n\n  private backgroundHeight: number = 0;\n  private tempPlayerY: number = 0;\n\n  onLoad() {\n    this.backgroundHeight = this.background1.getComponent(UITransform).height;\n  }\n\n  getLowerValue = (A: number, B: number): number => (A > B ? A : B);\n\n  update(dt: number) {\n    const playerY = this.player.getPosition().y;\n    if (this.tempPlayerY == playerY) return;\n    this.tempPlayerY = playerY;\n    const bg1Pos = this.background1.getPosition();\n    const bg2Pos = this.background2.getPosition();\n\n    if (playerY > this.getLowerValue(bg1Pos.y, bg2Pos.y)) {\n      this.scrollBackgrounds();\n    }\n  }\n\n  scrollBackgrounds() {\n    const bg1Pos = this.background1.getPosition();\n    const bg2Pos = this.background2.getPosition();\n\n    if (bg1Pos.y > bg2Pos.y) {\n      this.background2.setPosition(\n        new Vec3(bg1Pos.x, bg1Pos.y + this.backgroundHeight, bg1Pos.z)\n      );\n    } else {\n      this.background1.setPosition(\n        new Vec3(bg2Pos.x, bg2Pos.y + this.backgroundHeight, bg2Pos.z)\n      );\n    }\n  }\n}\n","import {\n  _decorator,\n  Component,\n  Node,\n  Vec2,\n  RigidBody2D,\n  EventTouch,\n  Collider2D,\n  Contact2DType,\n  IPhysics2DContact,\n  Animation,\n  UITransform,\n  PhysicsSystem2D,\n} from \"cc\";\nconst { ccclass, property } = _decorator;\n\n@ccclass(\"BeanFall\")\nexport class BeanFall extends Component {\n  @property(Node)\n  bean: Node = null;\n\n  @property(Node)\n  seesaw: Node = null;\n\n  private rigidBody: RigidBody2D = null;\n  private seesawCollider: Collider2D = null;\n  private seesawAnimation: Animation = null;\n\n  onLoad() {\n    if (!PhysicsSystem2D.instance.enable) {\n      PhysicsSystem2D.instance.enable = true;\n    }\n\n    this.rigidBody = this.bean.getComponent(RigidBody2D);\n    if (!this.rigidBody) {\n      return;\n    }\n\n    this.rigidBody.gravityScale = 0;\n\n    this.node.on(Node.EventType.TOUCH_START, this.onTouchStart, this);\n\n    this.seesawAnimation = this.seesaw.getComponent(Animation);\n  }\n\n  onDestroy() {\n    const beanCollider = this.bean.getComponent(Collider2D);\n    if (beanCollider) {\n      beanCollider.off(Contact2DType.BEGIN_CONTACT, this.onBeginContact, this);\n    }\n\n    this.node.off(Node.EventType.TOUCH_START, this.onTouchStart, this);\n  }\n\n  onTouchStart(event: EventTouch) {\n    this.scheduleOnce(this.startFalling, 0);\n  }\n\n  startFalling() {\n    if (!this.rigidBody) {\n      return;\n    }\n\n    const scale = this.bean.scale;\n\n    const volume = scale.x * scale.y * scale.z;\n    const gravityScale = volume * 5;\n\n    this.rigidBody.fixedRotation = true;\n    this.rigidBody.gravityScale = gravityScale * 50;\n  }\n\n  onBeginContact(\n    selfCollider: Collider2D,\n    otherCollider: Collider2D,\n    contact: IPhysics2DContact\n  ) {\n    if (otherCollider.node === this.seesaw) {\n      const beanPosition = this.bean.getWorldPosition();\n      const seesawPosition = this.seesaw.getWorldPosition();\n      const seesawHeight = this.seesaw.getComponent(UITransform).height;\n      if (beanPosition.y > seesawPosition.y + seesawHeight / 2) {\n        this.playSeesawAnimation();\n      } else if (beanPosition.y < seesawPosition.y - seesawHeight / 2) {\n        this.stopBean();\n      }\n    }\n  }\n\n  playSeesawAnimation() {\n    if (this.seesawAnimation) {\n      this.seesawAnimation.play();\n    }\n  }\n\n  stopBean() {\n    this.rigidBody.gravityScale = 0;\n    this.rigidBody.linearVelocity = new Vec2(0, 0);\n  }\n}\n","import { _decorator, Component, Node, Vec3, view } from \"cc\";\nconst { ccclass, property } = _decorator;\n\n@ccclass(\"CameraFollow\")\nexport class CameraFollow extends Component {\n  @property(Node)\n  player: Node = null;\n\n  @property\n  followSpeed: number = 1;\n\n  private initialPlayerPosition: Vec3 = new Vec3();\n  private initialCameraPosition: Vec3 = new Vec3();\n  private offset: Vec3 = new Vec3();\n\n  private isFollowing: boolean = false;\n  private isResetting: boolean = false;\n\n  onLoad() {\n    if (this.player) {\n      this.initialPlayerPosition.set(this.player.getWorldPosition());\n      this.initialCameraPosition.set(this.node.getWorldPosition());\n\n      Vec3.subtract(\n        this.offset,\n        this.initialCameraPosition,\n        this.initialPlayerPosition\n      );\n    }\n  }\n\n  update(dt: number) {\n    if (this.isFollowing && this.player) {\n      const targetPosition = this.player.getWorldPosition();\n      const desiredPosition = new Vec3();\n\n      Vec3.add(desiredPosition, targetPosition, this.offset);\n\n      const cameraPosition = this.node.getWorldPosition();\n      const newPosition = cameraPosition.lerp(\n        desiredPosition,\n        dt * this.followSpeed\n      );\n      this.node.setWorldPosition(newPosition);\n    }\n  }\n\n  setFollowing(following: boolean) {\n    this.isFollowing = following;\n  }\n}\n","import { Color, Canvas, UITransform, instantiate, math, Toggle, TextureCube, _decorator, Component, Button, labelAssembler, game, director, Node, Scene, renderer, CameraComponent, Label, ForwardPipeline, RichText } from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('internal.DebugViewRuntimeControl')\nexport class DebugViewRuntimeControl extends Component {\n    @property(Node)\n    compositeModeToggle: Node | null = null;\n    @property(Node)\n    singleModeToggle: Node | null = null;\n    @property(Node)\n    EnableAllCompositeModeButton: Node | null = null;\n\t_single: number = 0;\n\n    private strSingle: string[] = [\n        'No Single Debug',\n        'Vertex Color',\n        'Vertex Normal',\n        'Vertex Tangent',\n        'World Position',\n        'Vertex Mirror',\n        'Face Side',\n        'UV0',\n        'UV1',\n        'UV Lightmap',\n        'Project Depth',\n        'Linear Depth',\n\n        'Fragment Normal',\n        'Fragment Tangent',\n        'Fragment Binormal',\n        'Base Color',\n        'Diffuse Color',\n        'Specular Color',\n        'Transparency',\n        'Metallic',\n        'Roughness',\n        'Specular Intensity',\n        'IOR',\n\n        'Direct Diffuse',\n        'Direct Specular',\n        'Direct All',\n        'Env Diffuse',\n        'Env Specular',\n        'Env All',\n        'Emissive',\n        'Light Map',\n        'Shadow',\n        'AO',\n\n        'Fresnel',\n        'Direct Transmit Diffuse',\n        'Direct Transmit Specular',\n        'Env Transmit Diffuse',\n        'Env Transmit Specular',\n        'Transmit All',\n        'Direct Internal Specular',\n        'Env Internal Specular',\n        'Internal All',\n\n        'Fog',\n    ];\n    private strComposite: string[] = [\n        'Direct Diffuse',\n        'Direct Specular',\n        'Env Diffuse',\n        'Env Specular',\n        'Emissive',\n        'Light Map',\n        'Shadow',\n        'AO',\n\n        'Normal Map',\n        'Fog',\n\n        'Tone Mapping',\n        'Gamma Correction',\n\n        'Fresnel',\n        'Transmit Diffuse',\n        'Transmit Specular',\n        'Internal Specular',\n        'TT',\n    ];\n    private strMisc: string[] = [\n        'CSM Layer Coloration',\n        'Lighting With Albedo',\n    ];\n\n    private compositeModeToggleList: Node[] = [];\n    private singleModeToggleList: Node[] = [];\n    private miscModeToggleList: Node[] = [];\n    private textComponentList: RichText[] = [];\n    private labelComponentList: Label[] = [];\n    private textContentList: string[] = [];\n    private hideButtonLabel: Label;\n    start() {\n        // get canvas resolution\n        const canvas = this.node.parent.getComponent(Canvas);\n        if (!canvas) {\n            console.error('debug-view-runtime-control should be child of Canvas');\n            return;\n        }\n\n        const uiTransform = this.node.parent.getComponent(UITransform);\n        const halfScreenWidth = uiTransform.width * 0.5;\n        const halfScreenHeight = uiTransform.height * 0.5;\n\n        let x = -halfScreenWidth + halfScreenWidth * 0.1, y = halfScreenHeight - halfScreenHeight * 0.1;\n        const width = 200, height = 20;\n\n        // new nodes\n        const miscNode = this.node.getChildByName('MiscMode');\n        const buttonNode = instantiate(miscNode);\n        buttonNode.parent = this.node;\n        buttonNode.name = 'Buttons';\n        const titleNode = instantiate(miscNode);\n        titleNode.parent = this.node;\n        titleNode.name = 'Titles';\n\n        // title\n        for (let i = 0; i < 2; i++) {\n            const newLabel = instantiate(this.EnableAllCompositeModeButton.getChildByName('Label'));\n            newLabel.setPosition(x + (i > 0 ? 50 + width * 2 : 150), y, 0.0);\n            newLabel.setScale(0.75, 0.75, 0.75);\n            newLabel.parent = titleNode;\n            const labelComponent = newLabel.getComponent(Label);\n            labelComponent.string = i ? '----------Composite Mode----------' : '----------Single Mode----------';\n            labelComponent.color = Color.WHITE;\n            labelComponent.overflow = 0;\n            this.labelComponentList[this.labelComponentList.length] = labelComponent;\n        }\n\n        y -= height;\n        // single\n        let currentRow = 0;\n        for (let i = 0; i < this.strSingle.length; i++, currentRow++) {\n            if (i === this.strSingle.length >> 1) {\n                x += width;\n                currentRow = 0;\n            }\n            const newNode = i ? instantiate(this.singleModeToggle) : this.singleModeToggle;\n            newNode.setPosition(x, y - height * currentRow, 0.0);\n            newNode.setScale(0.5, 0.5, 0.5);\n            newNode.parent = this.singleModeToggle.parent;\n\n            const textComponent = newNode.getComponentInChildren(RichText);\n            textComponent.string = this.strSingle[i];\n            this.textComponentList[this.textComponentList.length] = textComponent;\n            this.textContentList[this.textContentList.length] = textComponent.string;\n\n            newNode.on(Toggle.EventType.TOGGLE, this.toggleSingleMode, this);\n\n            this.singleModeToggleList[i] = newNode;\n        }\n\n        x += width;\n        // buttons\n        this.EnableAllCompositeModeButton.setPosition(x + 15, y, 0.0);\n        this.EnableAllCompositeModeButton.setScale(0.5, 0.5, 0.5);\n        this.EnableAllCompositeModeButton.on(Button.EventType.CLICK, this.enableAllCompositeMode, this);\n        this.EnableAllCompositeModeButton.parent = buttonNode;\n        let labelComponent = this.EnableAllCompositeModeButton.getComponentInChildren(Label);\n        this.labelComponentList[this.labelComponentList.length] = labelComponent;\n\n        const changeColorButton = instantiate(this.EnableAllCompositeModeButton);\n        changeColorButton.setPosition(x + 90, y, 0.0);\n        changeColorButton.setScale(0.5, 0.5, 0.5);\n        changeColorButton.on(Button.EventType.CLICK, this.changeTextColor, this);\n        changeColorButton.parent = buttonNode;\n        labelComponent = changeColorButton.getComponentInChildren(Label);\n        labelComponent.string = 'TextColor';\n        this.labelComponentList[this.labelComponentList.length] = labelComponent;\n\n        const HideButton = instantiate(this.EnableAllCompositeModeButton);\n        HideButton.setPosition(x + 200, y, 0.0);\n        HideButton.setScale(0.5, 0.5, 0.5);\n        HideButton.on(Button.EventType.CLICK, this.hideUI, this);\n        HideButton.parent = this.node.parent;\n        labelComponent = HideButton.getComponentInChildren(Label);\n        labelComponent.string = 'Hide UI';\n        this.labelComponentList[this.labelComponentList.length] = labelComponent;\n        this.hideButtonLabel = labelComponent;\n\n        // misc\n        y -= 40;\n        for (let i = 0; i < this.strMisc.length; i++) {\n            const newNode = instantiate(this.compositeModeToggle);\n            newNode.setPosition(x, y - height * i, 0.0);\n            newNode.setScale(0.5, 0.5, 0.5);\n            newNode.parent = miscNode;\n\n            const textComponent = newNode.getComponentInChildren(RichText);\n            textComponent.string = this.strMisc[i];\n            this.textComponentList[this.textComponentList.length] = textComponent;\n            this.textContentList[this.textContentList.length] = textComponent.string;\n\n            const toggleComponent = newNode.getComponent(Toggle);\n            toggleComponent.isChecked = i ? true : false;\n            newNode.on(Toggle.EventType.TOGGLE, i ? this.toggleLightingWithAlbedo : this.toggleCSMColoration, this);\n            this.miscModeToggleList[i] = newNode;\n        }\n\n        // composite\n        y -= 150;\n        for (let i = 0; i < this.strComposite.length; i++) {\n            const newNode = i ? instantiate(this.compositeModeToggle) : this.compositeModeToggle;\n            newNode.setPosition(x, y - height * i, 0.0);\n            newNode.setScale(0.5, 0.5, 0.5);\n            newNode.parent = this.compositeModeToggle.parent;\n\n            const textComponent = newNode.getComponentInChildren(RichText);\n            textComponent.string = this.strComposite[i];\n            this.textComponentList[this.textComponentList.length] = textComponent;\n            this.textContentList[this.textContentList.length] = textComponent.string;\n\n            newNode.on(Toggle.EventType.TOGGLE, this.toggleCompositeMode, this);\n\n            this.compositeModeToggleList[i] = newNode;\n        }\n    }\n\n    isTextMatched(textUI, textDescription) : boolean {\n        let tempText = new String(textUI);\n        const findIndex = tempText.search('>');\n        if (findIndex === -1) {\n            return textUI === textDescription;\n        } else {\n            tempText = tempText.substr(findIndex + 1);\n            tempText = tempText.substr(0, tempText.search('<'));\n            return tempText === textDescription;\n        }\n    }\n    toggleSingleMode(toggle: Toggle) {\n        const debugView = director.root!.debugView;\n        const textComponent = toggle.getComponentInChildren(RichText);\n        for (let i = 0; i < this.strSingle.length; i++) {\n            if (this.isTextMatched(textComponent.string, this.strSingle[i])) {\n                debugView.singleMode = i;\n            }\n        }\n    }\n    toggleCompositeMode(toggle: Toggle) {\n        const debugView = director.root!.debugView;\n        const textComponent = toggle.getComponentInChildren(RichText);\n        for (let i = 0; i < this.strComposite.length; i++) {\n            if (this.isTextMatched(textComponent.string, this.strComposite[i])) {\n                debugView.enableCompositeMode(i, toggle.isChecked);\n            }\n        }\n    }\n    toggleLightingWithAlbedo(toggle: Toggle) {\n        const debugView = director.root!.debugView;\n        debugView.lightingWithAlbedo = toggle.isChecked;\n    }\n    toggleCSMColoration(toggle: Toggle) {\n        const debugView = director.root!.debugView;\n        debugView.csmLayerColoration = toggle.isChecked;\n    }\n    enableAllCompositeMode(button: Button) {\n        const debugView = director.root!.debugView;\n        debugView.enableAllCompositeMode(true);\n        for (let i = 0; i < this.compositeModeToggleList.length; i++) {\n            const toggleComponent = this.compositeModeToggleList[i].getComponent(Toggle);\n            toggleComponent.isChecked = true;\n        }\n\n        let toggleComponent = this.miscModeToggleList[0].getComponent(Toggle);\n        toggleComponent.isChecked = false;\n        debugView.csmLayerColoration = false;\n        toggleComponent = this.miscModeToggleList[1].getComponent(Toggle);\n        toggleComponent.isChecked = true;\n        debugView.lightingWithAlbedo = true;\n    }\n    hideUI(button: Button) {\n        const titleNode = this.node.getChildByName('Titles');\n        const activeValue = !titleNode.active;\n        this.singleModeToggleList[0].parent.active = activeValue;\n        this.miscModeToggleList[0].parent.active = activeValue;\n        this.compositeModeToggleList[0].parent.active = activeValue;\n        this.EnableAllCompositeModeButton.parent.active = activeValue;\n        titleNode.active = activeValue;\n        this.hideButtonLabel.string = activeValue ? 'Hide UI' : 'Show UI';\n    }\n\n    private _currentColorIndex = 0;\n    private strColor: string[] = [\n        '<color=#ffffff>',\n        '<color=#000000>',\n        '<color=#ff0000>',\n        '<color=#00ff00>',\n        '<color=#0000ff>',\n    ];\n    private color: Color[] = [\n        Color.WHITE,\n        Color.BLACK,\n        Color.RED,\n        Color.GREEN,\n        Color.BLUE,\n    ];\n    changeTextColor(button: Button) {\n        this._currentColorIndex++;\n        if (this._currentColorIndex >= this.strColor.length) {\n            this._currentColorIndex = 0;\n        }\n        for (let i = 0; i < this.textComponentList.length; i++) {\n            this.textComponentList[i].string = this.strColor[this._currentColorIndex] + this.textContentList[i] + '</color>';\n        }\n        for (let i = 0; i < this.labelComponentList.length; i++) {\n            this.labelComponentList[i].color = this.color[this._currentColorIndex];\n        }\n    }\n\n    onLoad() {\n    }\n    update(deltaTime: number) {\n    }\n}\n","import { _decorator, Component, Node, Label, director, Button } from \"cc\";\nimport { Global } from \"../gameconfig/Global\";\nconst { ccclass, property } = _decorator;\n\n@ccclass(\"GameManager\")\nexport class GameManager extends Component {\n  @property(Label)\n  playCountLabel: Label = null;\n\n  @property(Button)\n  startButton: Button = null;\n\n  onLoad() {\n    if (Global.playCount > 0) {\n      this.playCountLabel.string = `Bạn có ${Global.playCount} lượt`;\n    } else {\n      this.playCountLabel.string = `Bạn đã hết lượt chơi`;\n    }\n\n    if (this.startButton) {\n      this.startButton.node.on(Button.EventType.CLICK, this.startGame, this);\n    } else {\n      console.error(\"Start button is not assigned.\");\n    }\n  }\n\n  onDestroy() {}\n\n  startGame() {\n    if (Global.playCount > 0) {\n      director.loadScene(\"InGame\");\n    }\n  }\n}\n","import { _decorator, Component, Node } from \"cc\";\nconst { ccclass, property } = _decorator;\n\n@ccclass(\"Global\")\nexport class Global extends Component {\n  static playCount: number = Math.floor(Math.random() * 4) + 3;\n  static totalPoints: number = 0;\n}\n","// import { _decorator, Component, Node, view, Vec3, Canvas } from \"cc\";\n// const { ccclass, property } = _decorator;\n\n// @ccclass(\"ItemConfig\")\n// export class ItemConfig extends Component {\n//   @property(Node)\n//   logo: Node = null;\n\n//   @property(Canvas)\n//   canvas: Canvas = null;\n\n//   onLoad() {\n//     this.setPositionItemsPadding();\n//   }\n\n//   setPositionItemsPadding() {\n//     if (this.logo) {\n//       const paddingLeft = 20;\n//       const paddingTop = 20;\n//       const visibleSize = view.getVisibleSize();\n//       // Đặt vị trí của logo\n//       const newPosition = new Vec3(\n//         -visibleSize.width / 2 + paddingLeft + 66,\n//         visibleSize.height / 2 - paddingTop - 37,\n//         0\n//       );\n//       console.log(\"logo\", this.logo.getWorldPosition());\n//       console.log(\"newPosition\", newPosition);\n//       this.logo.setPosition(newPosition);\n\n//       // Cập nhật vị trí của logo\n//       //   this.canvas.node.addChild(this.logo);\n//     }\n//   }\n// }\n\nimport { _decorator, Component, Node, Vec3, UITransform, view } from \"cc\";\nconst { ccclass, property } = _decorator;\n\n@ccclass(\"LogoPositioner\")\nexport class LogoPositioner extends Component {\n  @property(Node)\n  logo: Node = null;\n\n  onLoad() {\n    this.setPositionWithPadding();\n  }\n\n  setPositionWithPadding() {\n    // if (this.logo) {\n    //   const paddingLeft = 20;\n    //   const paddingTop = 20;\n    //   // Lấy kích thước màn hình hiển thị\n    //   const visibleSize = view.getVisibleSize();\n    //   // Lấy UITransform component từ logo\n    //   const uiTransform = this.logo.getComponent(UITransform);\n    //   // Tính toán vị trí mới cho logo trong tọa độ của Canvas\n    //   const newPosition = new Vec3(\n    //     -visibleSize.width / 2 + paddingLeft + uiTransform.width / 2,\n    //     visibleSize.height / 2 - paddingTop - uiTransform.height / 2,\n    //     0\n    //   );\n    //   // Cập nhật vị trí của logo\n    //   this.logo.setPosition(newPosition);\n    // }\n  }\n}\n","import {\n  _decorator,\n  Component,\n  Node,\n  tween,\n  Tween,\n  Vec3,\n  RigidBody2D,\n  Contact2DType,\n  Collider2D,\n  IPhysics2DContact,\n  view,\n  Label,\n  Button,\n  director,\n  ERigidBody2DType,\n  UIOpacity,\n} from \"cc\";\nimport { CameraFollow } from \"./CameraFollow\";\nimport { Global } from \"../gameconfig/Global\";\nimport { BackgroundScroller } from \"../managers/BackgroundScroller\";\nconst { ccclass, property } = _decorator;\n\n@ccclass(\"ScreenTouchHandler\")\nexport class ScreenTouchHandler extends Component {\n  @property(Node)\n  bean: Node = null;\n\n  @property(Node)\n  seesaw: Node = null;\n\n  @property(Node)\n  legOfSeesaw: Node = null;\n\n  @property(Node)\n  grass: Node = null;\n\n  @property(Node)\n  player: Node = null;\n\n  @property(Node)\n  camera: Node = null;\n\n  @property(Node)\n  backgroundScroller: Node = null;\n\n  @property(Label)\n  resultLabel: Label = null;\n\n  @property(Button)\n  replayButton: Button = null;\n\n  @property(Node)\n  totalPoint: Node = null;\n\n  @property(Label)\n  point: Label = null;\n\n  @property(Label)\n  endgameTitle: Label = null;\n\n  @property(Label)\n  endgamePoint: Label = null;\n\n  @property(Node)\n  endgamePlayer: Node = null;\n\n  @property(Node)\n  endgameLogo: Node = null;\n\n  @property(Node)\n  logo: Node = null;\n\n  minScale: number = 1;\n\n  maxScale: number = 5;\n\n  duration: number = 4;\n\n  private rigidBean: RigidBody2D = null;\n\n  private rigidSeesaw: RigidBody2D = null;\n\n  private scalingTween: Tween<Node> = null;\n\n  private isPlayerLaunched: boolean = false;\n\n  private beanPosition: Vec3 = null;\n  private beanRotation: Vec3 = null;\n\n  private seesawPosition: Vec3 = null;\n  private seesawRotation: Vec3 = null;\n\n  private legOfSeesawPosition: Vec3 = null;\n  private legOfSeesawRotation: Vec3 = null;\n\n  private grassPosition: Vec3 = null;\n  private grassRotation: Vec3 = null;\n\n  private managerPosition: Vec3 = null;\n\n  onLoad() {\n    this.onInitData();\n    this.onInitController();\n  }\n\n  onInitController() {\n    this.node.on(Node.EventType.TOUCH_START, this.onTouchStart, this);\n    this.node.on(Node.EventType.TOUCH_END, this.onTouchEnd, this);\n    this.replayButton.node.on(Button.EventType.CLICK, this.replayGame, this);\n\n    this.rigidBean = this.bean.getComponent(RigidBody2D);\n    this.rigidSeesaw = this.seesaw.getComponent(RigidBody2D);\n\n    this.rigidBean.gravityScale = 0;\n\n    const beanCollider = this.bean.getComponent(Collider2D);\n    beanCollider.on(Contact2DType.BEGIN_CONTACT, this.onBeginContact, this);\n  }\n\n  onInitData() {\n    this.resultLabel.node.active = false;\n    this.replayButton.node.active = false;\n    this.totalPoint.active = false;\n    this.endgameTitle.node.active = false;\n    this.endgamePoint.node.active = false;\n    this.endgamePlayer.active = false;\n    this.endgameLogo.active = false;\n\n    this.beanPosition = this.bean.getWorldPosition();\n    this.beanRotation = this.bean.getPosition();\n\n    this.seesawPosition = this.seesaw.getWorldPosition();\n    this.seesawRotation = this.seesaw.eulerAngles;\n\n    this.legOfSeesawPosition = this.legOfSeesaw.getWorldPosition();\n    this.legOfSeesawRotation = this.legOfSeesaw.eulerAngles;\n\n    this.grassPosition = this.grass.getWorldPosition();\n    this.grassRotation = this.grass.eulerAngles;\n\n    this.managerPosition = this.node.getWorldPosition();\n  }\n\n  onDestroy() {\n    if (this.node) {\n      this.node.off(Node.EventType.TOUCH_START, this.onTouchStart, this);\n      this.node.off(Node.EventType.TOUCH_END, this.onTouchEnd, this);\n    }\n\n    // const beanCollider = this.bean.getComponent(Collider2D);\n    // if (beanCollider) {\n    //   beanCollider.off(Contact2DType.BEGIN_CONTACT, this.onBeginContact, this);\n    // }\n  }\n\n  replayGame() {\n    director.loadScene(\"StartGame\");\n  }\n\n  onTouchStart() {\n    this.startScaling();\n  }\n\n  onTouchEnd() {\n    this.stopScaling();\n  }\n\n  startScaling() {\n    if (!this.bean) {\n      return;\n    }\n\n    if (this.scalingTween) {\n      this.scalingTween.stop();\n    }\n\n    this.scalingTween = tween(this.bean)\n      .to(this.duration, {\n        scale: new Vec3(this.maxScale, this.maxScale, this.maxScale),\n      })\n      .to(this.duration, {\n        scale: new Vec3(this.minScale, this.minScale, this.minScale),\n      })\n      .union()\n      .repeatForever()\n      .start();\n  }\n\n  stopScaling() {\n    if (this.scalingTween) {\n      this.scalingTween.stop();\n      this.scalingTween = null;\n    }\n\n    const scale = this.bean.scale;\n    const volume = scale.x * scale.y * scale.z;\n    const gravityScale = volume * 10;\n\n    this.rigidBean.fixedRotation = true;\n    this.rigidBean.gravityScale = gravityScale;\n\n    Global.playCount--;\n  }\n\n  onBeginContact(\n    selfCollider: Collider2D,\n    otherCollider: Collider2D,\n    contact: IPhysics2DContact\n  ) {\n    if (otherCollider.node === this.seesaw) {\n      this.launchPlayer();\n    }\n  }\n\n  launchPlayer() {\n    if (this.isPlayerLaunched) {\n      return;\n    }\n\n    this.isPlayerLaunched = true;\n\n    const scale = this.bean.scale.x;\n    const level = Math.floor(\n      ((scale - this.minScale) / (this.maxScale - this.minScale)) * 8 + 1\n    );\n    Global.totalPoints += level;\n    const screenHeight = view.getVisibleSize().height;\n    const targetPosition = this.player.getWorldPosition().clone();\n\n    const duration = level * screenHeight;\n\n    targetPosition.y += duration;\n    this.seesawPosition.y += duration;\n    this.legOfSeesawPosition.y += duration;\n    this.grassPosition.y += duration;\n    this.beanPosition.y += duration;\n    this.managerPosition.y += duration;\n\n    const cameraFollow = this.camera.getComponent(CameraFollow);\n    if (cameraFollow) {\n      cameraFollow.player = this.player;\n      cameraFollow.setFollowing(true);\n    }\n\n    tween(this.player)\n      .to(1, { worldPosition: targetPosition }, { easing: \"quadOut\" })\n      .call(() => {\n        tween(this.node)\n          .delay(1)\n          .call(() => {\n            this.showResult(level);\n          })\n          .start();\n      })\n      .start();\n\n    const backgroundScroller =\n      this.backgroundScroller.getComponent(BackgroundScroller);\n    if (backgroundScroller) {\n      backgroundScroller.enabled = true;\n    }\n  }\n\n  showResult(level) {\n    this.resultLabel.node.active = true;\n    this.totalPoint.active = true;\n    this.resultLabel.string = `+${level} điểm`;\n    this.point.string = `${Global.totalPoints}`;\n\n    let uiOpacity = this.resultLabel.node.getComponent(UIOpacity);\n    if (!uiOpacity) {\n      uiOpacity = this.resultLabel.node.addComponent(UIOpacity);\n    }\n\n    uiOpacity.opacity = 0;\n    tween(uiOpacity).to(0.5, { opacity: 255 }).start();\n\n    setTimeout(() => {\n      tween(uiOpacity)\n        .to(0.5, { opacity: 0 })\n        .call(() => {\n          this.resultLabel.node.active = false;\n          this.updateItems();\n        })\n        .start();\n    }, 1000);\n  }\n\n  updateItems() {\n    if (Global.playCount == 0) {\n      const cameraFollow = this.camera.getComponent(CameraFollow);\n      if (cameraFollow) {\n        cameraFollow.setFollowing(false);\n      }\n      this.player.active = false;\n      this.endgamePoint.string = `${Global.totalPoints} điểm`;\n      this.endgameTitle.node.active = true;\n      this.endgamePoint.node.active = true;\n      this.endgamePlayer.active = true;\n      this.replayButton.node.active = true;\n      this.endgameLogo.active = true;\n      this.logo.active = false;\n      this.totalPoint.active = false;\n      this.grass.setWorldPosition(this.grassPosition);\n      this.grass.setRotationFromEuler(this.grassRotation);\n\n      Global.totalPoints = 0;\n      Global.playCount = Math.floor(Math.random() * 4) + 3;\n    } else {\n      this.rigidBean.gravityScale = 0;\n\n      this.rigidBean.type = ERigidBody2DType.Static;\n      this.rigidSeesaw.type = ERigidBody2DType.Static;\n\n      this.bean.setWorldPosition(this.beanPosition);\n      this.bean.setRotationFromEuler(this.beanRotation);\n      this.bean.setScale(new Vec3(this.minScale, this.minScale, this.minScale));\n\n      this.seesaw.setWorldPosition(this.seesawPosition);\n      this.seesaw.setRotationFromEuler(this.seesawRotation);\n\n      this.legOfSeesaw.setWorldPosition(this.legOfSeesawPosition);\n      this.legOfSeesaw.setRotationFromEuler(this.legOfSeesawRotation);\n\n      this.grass.setWorldPosition(this.grassPosition);\n      this.grass.setRotationFromEuler(this.grassRotation);\n\n      this.rigidBean.type = ERigidBody2DType.Dynamic;\n      this.rigidSeesaw.type = ERigidBody2DType.Dynamic;\n\n      this.isPlayerLaunched = false;\n\n      this.node.setWorldPosition(this.managerPosition);\n\n      const cameraFollow = this.camera.getComponent(CameraFollow);\n      if (cameraFollow) {\n        cameraFollow.setFollowing(false);\n      }\n    }\n  }\n}\n"]}